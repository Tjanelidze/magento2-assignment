<?php
/**
 * @copyright  Vertex. All rights reserved.  https://www.vertexinc.com/
 * @author     Mediotype                     https://www.mediotype.com/
 */

declare(strict_types=1);

use Magento\Backend\Block\Widget\Button;
use Magento\Framework\Data\Form\Element\Hidden;
use Vertex\AddressValidation\Block\Adminhtml\CleanseAddressButton;

/**
 * @var $block CleanseAddressButton
 * @var $element Hidden
 * @var $cleanseAddressButton Button
 * @var $updateAddressButton Button
 */

if (!$block->isAddressValidationEnabled()) {
    return;
}

$element = $block->getElement();
$cleanseAddressButton = $block->getCleanseAddressButtonBlock();
$updateAddressButton = $block->getUpdateAddressButton();

$init = json_encode($block->getDataInit(['messageContainerSelector' => '[data-role="vertex-message_container"]']));

$messageFieldId = 'order-vertex_' . ($block->getPrefix() === 'billingAddress' ? 'billing' : 'shipping') . '_message';
?>
<div data-mage-init="<?= $block->escapeHtmlAttr($init) ?>" class="vertex__admin-order__address-cleansing">
    <div class="admin__field">
        <div class="admin__field-control">
            <div class="message" data-role="vertex-message_container" style="display:none;"></div>
            <div class="actions">
                <?= $cleanseAddressButton->toHtml() ?>
                <?= $updateAddressButton->toHtml() ?>
            </div>
        </div>
    </div>
</div>
